function initInitialPagination(){const e=document.querySelector(".paginator"),t=document.getElementById("cards-grid");if(!e||!t)return;e.querySelectorAll("a").forEach((n=>{n.addEventListener("click",(function(n){n.preventDefault(),t.innerHTML='<div class="loading" style="text-align: center; padding: 40px; font-size: 16px; color: #666;">Carregando...</div>',fetch(this.href).then((e=>e.text())).then((n=>{const r=(new DOMParser).parseFromString(n,"text/html"),o=r.getElementById("cards-grid"),a=r.querySelector(".paginator");o&&(t.innerHTML=o.innerHTML),a&&e&&(e.innerHTML=a.innerHTML,initInitialPagination()),t.scrollIntoView({behavior:"smooth"}),window.history.pushState({},"",this.href)})).catch((e=>{console.error("Erro ao carregar página:",e),t.innerHTML="<p>Erro ao carregar conteúdo. Tente novamente.</p>"}))}))}))}function initCategoryFilters(){const e=document.getElementById("year_filter"),t=document.getElementById("month_filter"),n=document.getElementById("category_filter"),r=document.getElementById("cards-grid"),o=document.querySelector(".paginator");if(!e||!t||!n)return;let a=!1;function i(c=1){if(a)return;a=!0,r&&(r.innerHTML='<div class="loading" style="text-align: center; padding: 40px; font-size: 16px; color: #666;">Carregando...</div>'),o&&(o.innerHTML="");const s=document.getElementById("current_category")?.value||"",d=new FormData;d.append("action","filter_posts"),d.append("nonce",ajax_object.nonce),d.append("year",e.value),d.append("month",t.value),d.append("category",n.value),d.append("current_category",s),d.append("paged",c),fetch(ajax_object.ajax_url,{method:"POST",body:d}).then((e=>e.json())).then((e=>{e.success?(r&&(r.innerHTML=e.data.content),o&&(o.innerHTML=e.data.pagination,document.querySelectorAll(".paginator a").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=1;const n=new URL(this.href);if(t=n.searchParams.get("paged")||n.searchParams.get("page")||1,1===t){const e=n.pathname.match(/\/page\/(\d+)/);e&&(t=e[1])}1===t&&this.textContent.match(/^\d+$/)&&(t=this.textContent),i(t),r&&r.scrollIntoView({behavior:"smooth"});const o=new URL(window.location);t>1?o.searchParams.set("paged",t):o.searchParams.delete("paged"),window.history.pushState({},"",o)}))})))):(console.error("Erro ao filtrar posts:",e),r&&(r.innerHTML="<p>Erro ao carregar conteúdo. Tente novamente.</p>"))})).catch((e=>{console.error("Erro na requisição:",e),r&&(r.innerHTML="<p>Erro ao carregar conteúdo. Tente novamente.</p>")})).finally((()=>{a=!1}))}function c(){const e=new URL(window.location);e.searchParams.delete("paged"),window.history.pushState({},"",e)}e.addEventListener("change",(()=>{i(1),c()})),t.addEventListener("change",(()=>{i(1),c()})),n.addEventListener("change",(()=>{i(1),c()}))}function initFaqAjax(){const e=document.querySelectorAll(".category-link"),t=document.getElementById("faq-content");async function n(n,r){try{t.innerHTML='<div class="faq-loading"><p>Carregando respostas...</p></div>',o=r,e.forEach((e=>e.classList.remove("active"))),o.classList.add("active");const a=new FormData;a.append("action","get_respostas_by_assunto"),a.append("term_id",n),a.append("nonce",faq_ajax.nonce);const i=await fetch(faq_ajax.ajax_url,{method:"POST",body:a});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const c=await i.json();if(!c.success)throw new Error(c.data||"Erro ao carregar respostas");t.innerHTML=c.data,t.style.opacity="0",setTimeout((()=>{t.style.opacity="1"}),100)}catch(e){console.error("Erro ao carregar FAQ:",e),t.innerHTML='\n                <div class="faq-error">\n                    <p>Erro ao carregar as respostas. Tente novamente.</p>\n                    <button onclick="location.reload()" class="retry-btn">Recarregar página</button>\n                </div>\n            '}finally{!function(){const e=t.querySelector(".faq-loading");e&&e.remove()}()}var o}e.length&&t&&("undefined"!=typeof faq_ajax?(e.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.dataset.categoryId;t?n(t,this):console.error("ID do termo não encontrado")}))})),e.length>0&&e[0].classList.add("active"),e.forEach(((t,n)=>{t.addEventListener("keydown",(function(t){let r;switch(t.key){case"ArrowRight":case"ArrowDown":t.preventDefault(),r=(n+1)%e.length,e[r].focus();break;case"ArrowLeft":case"ArrowUp":t.preventDefault(),r=(n-1+e.length)%e.length,e[r].focus();break;case"Enter":case" ":t.preventDefault(),this.click()}}))}))):console.error("FAQ AJAX: variáveis não encontradas"))}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".btnContrast"),t=document.querySelector(".mnuContrast");e.addEventListener("click",(function(){t.classList.toggle("open")}));const n=document.querySelector(".btnMobile"),r=document.querySelector(".mnuDefault");n&&n.addEventListener("click",(function(){r.classList.toggle("open")})),window.addEventListener("resize",(()=>{window.innerWidth>768&&r.classList.remove("open")}));function o(e){e.preventDefault();const t=this.href;fetch(t).then((e=>e.text())).then((e=>{const n=(new DOMParser).parseFromString(e,"text/html"),r=n.querySelector("#"+this.closest("nav").previousElementSibling.id).innerHTML,o=n.querySelector(".pagination").innerHTML;document.querySelector("#"+this.closest("nav").previousElementSibling.id).innerHTML=r,document.querySelector(".pagination").innerHTML=o,window.history.pushState(null,"",t),a()})).catch((e=>console.error("Error fetching the page:",e)))}function a(){document.querySelectorAll(".pagination a").forEach((e=>{e.addEventListener("click",o)}))}document.querySelectorAll(".category-link").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();!function(e){fetch(`/wp-json/wp/v2/posts?categories=${e}`).then((e=>e.json())).then((e=>{const t=document.querySelector(".faq .questions");t.innerHTML="",e.forEach((e=>{const n=document.createElement("section");n.setAttribute("itemscope",""),n.setAttribute("itemprop","mainEntity"),n.setAttribute("itemtype","https://schema.org/Question"),n.classList.add("question");const r=document.createElement("summary");r.setAttribute("itemprop","name"),r.textContent=e.title.rendered;const o=document.createElement("details");o.setAttribute("itemscope",""),o.setAttribute("itemprop","acceptedAnswer"),o.setAttribute("itemtype","https://schema.org/Answer");const a=document.createElement("div");a.setAttribute("itemprop","text"),a.innerHTML=e.content.rendered,o.appendChild(a),n.appendChild(r),n.appendChild(o),t.appendChild(n)}))})).catch((e=>console.error("Error fetching posts:",e)))}(this.getAttribute("data-category-id"))}))})),a(),initCategoryFilters(),initInitialPagination(),initFaqAjax()}));